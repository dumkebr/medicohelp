╔════════════════════════════════════════════════════════════════╗
║         MédicoHelp Backend V6 - INSTALAÇÃO RÁPIDA             ║
║                                                                ║
║  Microserviço Node.js para Admin, Analytics e Protocolos      ║
╚════════════════════════════════════════════════════════════════╝

┌────────────────────────────────────────────────────────────────┐
│ PASSO 1: Instalar Dependências                                │
└────────────────────────────────────────────────────────────────┘

  cd medicohelp-backend
  npm install

┌────────────────────────────────────────────────────────────────┐
│ PASSO 2: Rodar o Servidor                                     │
└────────────────────────────────────────────────────────────────┘

  npm start

  ✅ Servidor online em: http://localhost:3001

┌────────────────────────────────────────────────────────────────┐
│ PASSO 3: Testar Conexão                                       │
└────────────────────────────────────────────────────────────────┘

  curl http://localhost:3001/health
  
  Deve retornar: {"ok":true}

┌────────────────────────────────────────────────────────────────┐
│ PASSO 4: Fazer Login                                          │
└────────────────────────────────────────────────────────────────┘

  Email: admin@medicohelp.com.br
  Senha: medicohelp-admin

  Via API:
  
  curl -X POST http://localhost:3001/api/auth/login \
    -H "Content-Type: application/json" \
    -d '{"email":"admin@medicohelp.com.br","password":"medicohelp-admin"}'

┌────────────────────────────────────────────────────────────────┐
│ PASSO 5: Acessar Painel Admin                                 │
└────────────────────────────────────────────────────────────────┘

  1. Abrir navegador em: http://localhost:5000/admin-api.html
  
  2. Configurar Backend URL: http://localhost:3001
  
  3. Clicar "Testar Conexão"
  
  4. Fazer login com credenciais acima
  
  5. Gerenciar KB, Logs e Vendas!

┌────────────────────────────────────────────────────────────────┐
│ 📁 ESTRUTURA DO BACKEND                                       │
└────────────────────────────────────────────────────────────────┘

  medicohelp-backend/
  ├── server.js           → Entry point
  ├── package.json        → Dependências
  ├── .env                → Configuração
  ├── src/
  │   ├── services/
  │   │   ├── db.js       → SQLite + schema
  │   │   └── auth-mw.js  → Autenticação
  │   └── routes/
  │       ├── auth.js     → Login
  │       ├── kb.js       → Knowledge Base
  │       ├── logs.js     → Analytics
  │       ├── sales.js    → Vendas
  │       └── protocols.js→ Protocolos
  └── data/
      ├── medicohelp.db   → Database
      ├── kb/             → Arquivos KB
      └── protocols/      → Protocolos

┌────────────────────────────────────────────────────────────────┐
│ 🔐 ROLES E PERMISSÕES                                         │
└────────────────────────────────────────────────────────────────┘

  ADMIN:
  ✅ Criar usuários
  ✅ Editar KB
  ✅ Deletar KB
  ✅ Ver analytics
  ✅ Gerenciar vendas
  ✅ Editar protocolos
  
  EDITOR:
  ✅ Editar KB
  ✅ Ver analytics
  ✅ Editar protocolos
  ❌ Deletar KB
  ❌ Criar usuários

┌────────────────────────────────────────────────────────────────┐
│ 📡 ENDPOINTS PRINCIPAIS                                       │
└────────────────────────────────────────────────────────────────┘

  PUBLIC:
  GET  /health              → Health check
  POST /api/auth/login      → Login
  
  AUTHENTICATED (Header: x-auth):
  GET    /api/kb            → Lista KB files
  GET    /api/kb/:file      → Lê KB file
  POST   /api/kb/:file      → Salva KB (editor+)
  DELETE /api/kb/:file      → Apaga KB (admin)
  
  GET  /api/logs            → Lista logs
  POST /api/logs            → Salva log
  GET  /api/logs/csv        → Exporta CSV
  
  POST /api/sales/upload    → Upload CSV
  GET  /api/sales/summary   → Resumo vendas
  
  GET  /api/protocols       → Lista protocolos
  GET  /api/protocols/:id   → Lê protocolo
  POST /api/protocols/:id   → Salva protocolo

┌────────────────────────────────────────────────────────────────┐
│ 🚀 DEPLOY                                                     │
└────────────────────────────────────────────────────────────────┘

  Ver arquivo DEPLOY.md para instruções completas.
  
  Opções rápidas:
  - Railway.app (recomendado)
  - Heroku
  - Replit (novo Repl)
  - VPS próprio

┌────────────────────────────────────────────────────────────────┐
│ 🛟 TROUBLESHOOTING                                            │
└────────────────────────────────────────────────────────────────┘

  Porta ocupada?
  → Editar .env e trocar PORT=3001 para PORT=3002
  
  Banco corrompido?
  → rm data/medicohelp.db && npm start
  
  Erro de autenticação?
  → Verificar se token está no header 'x-auth'
  
  KB files não aparecem?
  → Copiar de client/public/kb/ para data/kb/

┌────────────────────────────────────────────────────────────────┐
│ 📚 DOCUMENTAÇÃO COMPLETA                                      │
└────────────────────────────────────────────────────────────────┘

  README.md         → Referência completa de APIs
  QUICK_START.md    → Início rápido
  DEPLOY.md         → Guia de deploy produção
  INSTALL.txt       → Este arquivo

┌────────────────────────────────────────────────────────────────┐
│ ℹ️  INFORMAÇÕES                                               │
└────────────────────────────────────────────────────────────────┘

  Empresa: C.J.Dumke Tecnologia e Saúde LTDA / MEI
  CNPJ: 63.354.382/0001-71
  Versão: Backend V6
  Licença: Proprietário
  Suporte: Abrir issue no repositório

═══════════════════════════════════════════════════════════════════

  Pronto! Backend configurado. ✅
  
  Próximo passo: Rodar 'npm start' e acessar o painel admin.

═══════════════════════════════════════════════════════════════════
